<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>粒子漩涡特效</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #000;
    }
    canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
<canvas id="particles"></canvas>

<script>
  const canvas = document.getElementById('particles');
  const ctx = canvas.getContext('2d');
  const particles = [];
  const particleCount = 200;
  const speed = 2;
  let centerX, centerY;

  // 初始画布大小
  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    centerX = canvas.width / 2;
    centerY = canvas.height / 2;
  }

  // 初始化粒子
  function initParticles() {
    for (let i = 0; i < particleCount; i++) {
      particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        size: Math.random() * 2 + 1,
        speedX: (Math.random() - 0.5) * 2,
        speedY: (Math.random() - 0.5) * 2,
        targetX: centerX,
        targetY: centerY,
      });
    }
  }

  // 更新粒子设置
  function updateParticles() {
    for (let i = 0; i < particles.length; i++) {
      const particle = particles[i];
      // 靠近旋涡中心
      particle.targetX = centerX + (Math.sin(i / 5 + Date.now() * 0.001) * 100);
      particle.targetY = centerY + (Math.cos(i / 7 + Date.now() * 0.001) * 100);

      // 吸引粒子到漩涡中心
      const angle = Math.atan(particle.y- centerY, particle.x - centerX);
      const distance = Math.sqrt(Math.pow(particle.x - centerX, 2) + Math.pow(particle.y - centerY, 2));

      particle.speedX += (Math.cos(angle) / distance * 0.01) * (speed - particle.size);
      particle.speedY += (Math.sin(angle) / distance * 0.01) * (speed - particle.size);

      // 更新位置
      particle.x += particle.speedX;
      particle.y += particle.speedY;

      // 边界检测
      if (particle.x < 0) particle.x = canvas.width;
      if (particle.y < 0) particle.y = canvas.height;
      if (particle.x > canvas.width) particle.x = 0;
      if (particle.y > canvas.height) particle.y = 0;
    }
  }

  // 绘制粒子
  function drawParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
    for (let i = 0; i < particles.length; i++) {
      const particle = particles[i];
      ctx.beginPath();
      ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  // 动画循环
  function animate() {
    requestAnimationFrame(animate);
    updateParticles();
    drawParticles();
  }

  //初始化
  resizeCanvas();
  initParticles();
  animate();

  window.addEventListener('resize', resizeCanvas);
</script>
</body>
</html>